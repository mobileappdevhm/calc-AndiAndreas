import 'package:calculator2/widgets/calcDisplay';
import 'package:flutter/material.dart';

class CalcKeyPad extends StatefulWidget {
  final CalcDisplayState displayWidgetState;

  CalcKeyPad(this.displayWidgetState);

  @override
  State createState() {
    return new CalcKeyPadState(displayWidgetState);
  }
}

class CalcKeyPadState extends State<CalcKeyPad> {
  final CalcDisplayState displayWidgetState;

  CalcKeyPadState(this.displayWidgetState);

  @override
  Widget build(BuildContext context) {
    return new Column(
      mainAxisAlignment: MainAxisAlignment.spaceEvenly,
      children: <Widget>[
        new Row(
          children: <Widget>[
            new ExpandedFunctionKey("CE", displayWidgetState),
            new ExpandedFunctionKey("C", displayWidgetState),
            new ExpandedFunctionKey("<=", displayWidgetState),
            new ExpandedFunctionKey("/", displayWidgetState),
          ],
        ),
        new Row(
          children: <Widget>[
            new ExpandedNumberKey(7, 1, displayWidgetState),
            new ExpandedNumberKey(8, 1, displayWidgetState),
            new ExpandedNumberKey(9, 1, displayWidgetState),
            new ExpandedFunctionKey("*", displayWidgetState),
          ],
        ),
        new Row(
          children: <Widget>[
            new ExpandedNumberKey(4, 1, displayWidgetState),
            new ExpandedNumberKey(5, 1, displayWidgetState),
            new ExpandedNumberKey(6, 1, displayWidgetState),
            new ExpandedFunctionKey("-", displayWidgetState),
          ],
        ),
        new Row(
          children: <Widget>[
            new ExpandedNumberKey(1, 1, displayWidgetState),
            new ExpandedNumberKey(2, 1, displayWidgetState),
            new ExpandedNumberKey(3, 1, displayWidgetState),
            new ExpandedFunctionKey("+", displayWidgetState),
          ],
        ),
        new Row(
          children: <Widget>[
            new ExpandedFunctionKey("", displayWidgetState),
            new ExpandedNumberKey(0, 1, displayWidgetState),
            new ExpandedFunctionKey(".", displayWidgetState),
            new ExpandedFunctionKey("=", displayWidgetState),
          ],
        ),
      ],
    );
  }
}

class ExpandedFunctionKey extends StatelessWidget {
  final String text;
  final CalcDisplayState displayWidgetState;

  ExpandedFunctionKey(this.text, this.displayWidgetState);

  @override
  Widget build(BuildContext context) {
    return new Expanded(
        child: new Container(
            padding: const EdgeInsets.all(25.0),
            child: new GestureDetector(
              onTap: onClick,
              child: new Text(text, style: new TextStyle(
                color: Colors.white,
                fontWeight: FontWeight.w800,
                fontFamily: 'Roboto',
                letterSpacing: 0.5,
                fontSize: 18.0,
                height: 2.0,
              ), textAlign: TextAlign.center,),
            )
        )
    );
  }

  void onClick() {
    displayWidgetState.addToInput(text.toString());
  }
}

class ExpandedNumberKey extends StatelessWidget {
  final int number;
  final int flexValue;
  final CalcDisplayState displayWidgetState;

  ExpandedNumberKey(this.number, this.flexValue, this.displayWidgetState);

  @override
  Widget build(BuildContext context) {
    return new Expanded(
        flex: flexValue,
        child: new Container(
          padding: const EdgeInsets.all(25.0),
          child: new GestureDetector(
            onTap: onClick,
            child: new Text(number.toString(), style: new TextStyle(
              color: Colors.white,
              fontWeight: FontWeight.w800,
              fontFamily: 'Roboto',
              letterSpacing: 0.5,
              fontSize: 18.0,
              height: 2.0,
            ), textAlign: TextAlign.center,),
          ),
        )
    );
  }

  void onClick() {
    displayWidgetState.addToInput(number.toString());
  }
}